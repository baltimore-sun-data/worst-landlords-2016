//- I use this datalink variable to quickly switch between local and uploaded assets. 
//- For example, say I am uploading files to http://data.baltimoresun.com/example-link
//- If I wanted to switch quickly to my local files, instead of changing all of my links, 
//- I can just modify this single variable.
//- There are two datalink variables so I don't have to rewrite the link every time. 
//- The second datalink variable declaration overwrites the first one. 
//- When I want to switch to the server assets, I comment out the second declaration.
- var datalink = "http://data.baltimoresun.com/PROJECTLINK/"
- var datalink = ""

include includes/data.pug

doctype html
//if lt IE 7
	<html class="no-js lt-ie9 lt-ie8 lt-ie7">
//if IE 7
	<html class="no-js lt-ie9 lt-ie8">
//if IE 8
	<html class="no-js lt-ie9">
html(class="no-js", lang="en")
	head
		//Basic page needs
		meta(charset="utf-8")
		title Baltimore's worst landlords
		meta(name="description", content="")
		meta(name="author", content="The Baltimore Sun") 
		meta(name="viewport", content="width=device-width, initial-scale=1, maximum-scale=1")
		link(rel="stylesheet", type="text/css", href="http://fonts.googleapis.com/css?family=PT+Serif|Lato")
		link(rel="stylesheet" href="https://unpkg.com/leaflet@1.0.2/dist/leaflet.css")
		link(rel="stylesheet", type="text/css", href=datalink + "dist/css/style.css")

		//Facebook Stuff
		meta(property="og:title", content="")
		meta(property="og:url", content="")
		meta(property="og:image", content="")
		meta(property="og:site_name", content="The Baltimore Sun")
		meta(property="og:description", content="")
		meta(property="fb:app_id", content="310302989040998")
		//Twitter Stuff
		meta(name="twitter:card", content="summary")
		meta(name="twitter:site", content="@baltimoresun")
		meta(name="twitter:creator", content="")
		meta(name="twitter:title", content="")
		meta(name="twitter:description", content="")
		meta(name="twitter:image", content="")
		meta(name="twitter:domain", content="baltimoresun.com")

		//- Ad tag, uncomment to put in ad. Be sure to uncomment the ad-for-body below.
		//- include includes/ad-for-header.html
		
	body
		//- This omniture file will also add a topnav. 
		//- Remember to update the omniture tags
		include includes/omniture.html
		
		.container
			.splashWrapper
				.content
					h1 Baltimore's worst landlords
					p The Baltimore Sun analysed data from Maryland Case Search, Baltimore rental registrations, Open Baltimore and other sources to identify landlords and properties that were consistently fined for life, health and safety violations and other infractions. 
						span Read more about our methodology.
					.buttonDiv.buttonDiv--splash
						a(href="#" target="_blank") About this project
					.buttonIcon.buttonIcon--splash
						i.icon-down-open
			.listWrapper
				ul.list.list--landlords
					each landlord, index in landlords
						li.list__item(data-landlord=index, id="landlord"+index, class="list__item--" + index)
							.landlordName
								h3 #{landlord.name}
								i.icon-right-big
							.stat.stat--properties
								p Properties
									br
									span #{landlord.numProperties}
							.stat.stat--units
								p Units
									br
									span #{landlord.numUnits}
							.stat.stat--violations
								p Violations
									br
									span #{landlord.numViolations}
				each landlord, lIndex in landlords
					ul.list.list--properties(class="list--properties--" + lIndex)
						.landlordName
							.backButton(data-landlord=lIndex)
								i.icon-left-big
							h3 #{landlord.name} Properties
						each property, index in properties
							if property.landlord_num === lIndex
								li.list__item.property(id=property.id onClick="map.panTo(new L.LatLng("+property.lat+","+property.lon+"));markers["+property.id+"].openPopup();$('.property').removeClass('list__item-selected');$('#"+property.id+"').addClass('list__item-selected');")
									p #{property.address}
									.stat.stat--violations ECB
										p #{property.ecb}
									.stat.stat--violations HABC
										p #{property.pros}
									.stat.stat--violations Lead
										p #{property.lpv}
			.mapWrapper
				#map
		

		//- Ad tag, uncomment to put in ad. Be sure to uncomment the ad-for-header above.
		//- #leaderboard			
			include includes/ad-for-body.html
		
		//Javascript
		script(src="https://use.typekit.net/nta3eyd.js")
		script.
			try{Typekit.load({ async: true });}catch(e){}
			var map;
			var markers;
		script(src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous")
		script(src="https://unpkg.com/leaflet@1.0.2/dist/leaflet.js")
		script(src=datalink + "dist/js/app.js")
		//- script(src=datalink + "js/app.min.js")
		
